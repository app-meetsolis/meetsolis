# Story 2.9: Navigation Refactor (Left Sidebar)

## Status

Draft

---

## Story

**As a** user,
**I want** a left sidebar navigation matching the reference design,
**so that** navigation is consistent with modern SaaS UI patterns and easier to use.

---

## Acceptance Criteria

1. Left sidebar navigation replaces top horizontal navigation
2. Sidebar visible on all dashboard pages: `/dashboard`, `/clients`, `/clients/[id]`, `/meetings` (Epic 3), `/assistant` (Epic 4), `/settings`
3. Sidebar layout (desktop ≥1024px):
   - Fixed left position, 240px width
   - MeetSolis logo/brand at top
   - Navigation items (vertical): Clients, Meetings, Assistant, Settings
   - Each item: Icon (20px) + Label (14px)
   - Active state: #001F3F background, white text, left border accent
   - User profile section at bottom
4. Sidebar layout (tablet/mobile <1024px):
   - Hidden by default
   - Hamburger menu button (top-left header) opens overlay sidebar
   - Overlay: 280px width, slides in from left, backdrop dismiss
   - Closes automatically on route change
5. Main content area adjusts for sidebar (desktop: `margin-left: 240px`)
6. Keyboard shortcuts maintained (Ctrl+D, Ctrl+Shift+C, Ctrl+M, Ctrl+,, Ctrl+A for Assistant)
7. Smooth transition: No broken states during migration, all existing pages work
8. Responsive: Sidebar behavior adapts to screen size without layout shift

---

## Tasks / Subtasks

- [ ] **Task 1: Create LeftSidebar Component** (AC: 2, 3, 4)
  - [ ] Create `apps/web/src/components/dashboard/LeftSidebar.tsx`
  - [ ] Implement desktop layout:
    - Container: `fixed left-0 top-0 h-screen w-60 bg-white border-r`
    - Logo section at top (padding: 24px)
    - Navigation items (flex flex-col gap-2, padding: 16px)
    - User profile section at bottom (margin-top: auto)
  - [ ] Navigation items array:
    ```typescript
    const navItems = [
      { label: 'Clients', href: '/clients', icon: Users, shortcut: 'ctrl+shift+c' },
      { label: 'Meetings', href: '/meetings', icon: Video, shortcut: 'ctrl+m' },
      { label: 'Assistant', href: '/assistant', icon: Sparkles, shortcut: 'ctrl+a' },
      { label: 'Settings', href: '/settings', icon: Settings, shortcut: 'ctrl+,' },
    ];
    ```
  - [ ] Active state logic: Compare `pathname` with `item.href`
  - [ ] Active styling: `bg-[#001F3F] text-white border-l-4 border-[#F97316]`

- [ ] **Task 2: Mobile Sidebar Overlay** (AC: 4)
  - [ ] Add state: `const [mobileOpen, setMobileOpen] = useState(false)`
  - [ ] Hamburger button: `<Button onClick={() => setMobileOpen(true)}>...</Button>` (only visible <1024px)
  - [ ] Overlay backdrop: `<div className="fixed inset-0 bg-black/50 z-40" onClick={close} />`
  - [ ] Sidebar overlay: `<div className="fixed left-0 top-0 h-screen w-70 bg-white z-50 transform transition-transform" />`
  - [ ] Animation: `translate-x-0` when open, `-translate-x-full` when closed
  - [ ] Close on route change: `useEffect(() => { setMobileOpen(false) }, [pathname])`

- [ ] **Task 3: Update Dashboard Layout** (AC: 5, 7)
  - [ ] Edit `apps/web/src/app/(dashboard)/layout.tsx`
  - [ ] Remove `<Navigation />` from header
  - [ ] Add `<LeftSidebar />` outside main content
  - [ ] Update main content margin: `<main className="lg:ml-60">...</main>`
  - [ ] Keep header minimal: Logo (mobile) + UserProfile (right)
  - [ ] Test all existing pages: `/clients`, `/clients/[id]`, `/dashboard`

- [ ] **Task 4: Keyboard Shortcuts** (AC: 6)
  - [ ] Move keyboard shortcut logic to LeftSidebar
  - [ ] Use `useHotkeys` from react-hotkeys-hook
  - [ ] Shortcuts: Ctrl+Shift+C, Ctrl+M, Ctrl+A, Ctrl+,
  - [ ] Add tooltips showing shortcuts on hover

- [ ] **Task 5: User Profile Section** (AC: 3)
  - [ ] Position at sidebar bottom: `mt-auto`
  - [ ] Display: User avatar (Clerk), Name, Email
  - [ ] Dropdown menu: Account Settings, Sign Out
  - [ ] Match existing UserProfile component behavior

- [ ] **Task 6: Deprecate Old Navigation** (AC: 7)
  - [ ] Keep `Navigation.tsx` temporarily (don't delete, comment out)
  - [ ] Add deprecation comment: "// DEPRECATED: Replaced by LeftSidebar in Story 2.9"
  - [ ] Plan removal in later cleanup story

- [ ] **Task 7: Responsive Testing** (AC: 8)
  - [ ] Test desktop (≥1024px): Sidebar visible, content margin-left
  - [ ] Test tablet (768-1023px): Overlay sidebar, hamburger menu
  - [ ] Test mobile (<768px): Overlay sidebar, full-width content
  - [ ] Test transitions: No layout shift, smooth animations

- [ ] **Task 8: Update Navigation Items for Epic 3/4** (AC: 2)
  - [ ] Add "Meetings" nav item (links to /meetings, Epic 3 placeholder)
  - [ ] Add "Assistant" nav item (links to /assistant, Epic 4 placeholder)
  - [ ] Create placeholder pages if needed:
    - `/app/(dashboard)/meetings/page.tsx`: "Coming soon in Epic 3"
    - `/app/(dashboard)/assistant/page.tsx`: "Coming soon in Epic 4"

- [ ] **Task 9: Component Tests**
  - [ ] Test sidebar renders with all nav items
  - [ ] Test active state highlighting (current route)
  - [ ] Test mobile overlay open/close
  - [ ] Test keyboard shortcuts navigation
  - [ ] Test responsive behavior (desktop vs mobile)
  - [ ] Test user profile dropdown
  - [ ] Test navigation to all routes

---

## Dev Notes

### Relevant Architecture

**Design Specs (from Reference Screenshots):**
- Sidebar width: 240px (desktop), 280px (mobile overlay)
- Background: White (#FFFFFF) or light gray (#F9FAFB)
- Border: Right border, subtle gray
- Logo section: 24px padding, 60px height
- Nav items:
  - Icon: 20px, Label: 14px medium
  - Padding: 12px vertical, 16px horizontal
  - Gap between icon/label: 12px
  - Active: #001F3F background, white text, 4px left orange accent
  - Hover: #F3F4F6 background (non-active)

**Component Library:**
- Shadcn Button (ghost variant for nav items)
- Lucide icons: Users, Video, Sparkles, Settings
- react-hotkeys-hook for shortcuts
- Clerk UserButton for profile

**Layout Strategy:**
```html
<!-- Desktop Layout -->
<div className="flex min-h-screen">
  <LeftSidebar className="hidden lg:block" /> <!-- Fixed 240px -->
  <main className="flex-1 lg:ml-60"> <!-- Content with margin -->
    {children}
  </main>
</div>

<!-- Mobile Layout -->
<div className="flex min-h-screen">
  <!-- Overlay sidebar (shown when mobileOpen) -->
  <LeftSidebar className="lg:hidden" overlay={mobileOpen} onClose={...} />

  <!-- Header with hamburger -->
  <header className="lg:hidden">
    <Button onClick={openMobileSidebar}>☰</Button>
  </header>

  <main className="flex-1"> <!-- No margin on mobile -->
    {children}
  </main>
</div>
```

**Migration Checklist:**
- [ ] LeftSidebar component created
- [ ] DashboardLayout updated (remove top nav, add sidebar)
- [ ] All routes tested (clients, dashboard, settings)
- [ ] Responsive behavior verified
- [ ] Keyboard shortcuts working
- [ ] User profile in sidebar
- [ ] No visual regressions

**Backward Compatibility:**
- All existing routes work unchanged
- No database schema changes
- Client components (ClientCard, ClientGrid, ClientDetail) unaffected
- Only layout wrapper changes

**Future Enhancements (Post-Story 2.9):**
- Collapsible sidebar (icon-only mode)
- Sidebar width customization (user preference)
- Dark mode support
- Sidebar section dividers (primary nav vs settings)

### Testing

**Test Location:**
- Component tests: `apps/web/src/components/dashboard/__tests__/`
- Integration tests: `apps/web/__tests__/navigation/`

**Testing Standards:**
- Use Jest + Testing Library
- Mock Next.js router (useRouter, usePathname)
- Mock Clerk UserButton

**Specific Requirements:**
- Test sidebar renders all nav items
- Test active state (pathname matching)
- Test mobile overlay open/close
- Test responsive visibility (hidden lg:block)
- Test keyboard shortcuts
- Test navigation to routes

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-10 | 1.0 | Initial story creation (Epic 2 UI alignment) | Sarah (PO) |

---

## Dev Agent Record

*This section will be populated by the development agent during implementation.*

### Agent Model Used

*TBD*

### Debug Log References

*TBD*

### Completion Notes List

*TBD*

### File List

*TBD*

---

## QA Results

*This section will be populated by the QA agent after story completion.*
